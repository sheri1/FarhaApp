{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\jit\\\\Desktop\\\\farhasheri\\\\screens\\\\ProfileScreen\\\\ProfileScreen.js\";\nimport React, { Component } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport styles from \"./ProfileScreenStyle\";\nimport HeaderMenu from \"../../components/HeadersComponent/HeaderMenu\";\nimport StyledText from \"../../components/StyledTexts/StyledText\";\nimport { AntDesign } from '@expo/vector-icons';\nimport { withFirebaseHOC } from \"../../config/Firebase\";\nimport AsyncStorage from '@react-native-community/async-storage';\nimport * as firebase from 'firebase';\nvar _setTimeout = global.setTimeout;\nvar _clearTimeout = global.clearTimeout;\nvar MAX_TIMER_DURATION_MS = 60 * 1000;\n\nif (Platform.OS === 'android') {\n  var timerFix = {};\n\n  var runTask = function runTask(id, fn, ttl, args) {\n    var waitingTime = ttl - Date.now();\n\n    if (waitingTime <= 1) {\n      InteractionManager.runAfterInteractions(function () {\n        if (!timerFix[id]) {\n          return;\n        }\n\n        delete timerFix[id];\n        fn.apply(void 0, _toConsumableArray(args));\n      });\n      return;\n    }\n\n    var afterTime = Math.min(waitingTime, MAX_TIMER_DURATION_MS);\n    timerFix[id] = _setTimeout(function () {\n      return runTask(id, fn, ttl, args);\n    }, afterTime);\n  };\n\n  global.setTimeout = function (fn, time) {\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    if (MAX_TIMER_DURATION_MS < time) {\n      var ttl = Date.now() + time;\n      var id = '_lt_' + Object.keys(timerFix).length;\n      runTask(id, fn, ttl, args);\n      return id;\n    }\n\n    return _setTimeout.apply(void 0, [fn, time].concat(args));\n  };\n\n  global.clearTimeout = function (id) {\n    if (typeof id === 'string' && id.startsWith('_lt_')) {\n      _clearTimeout(timerFix[id]);\n\n      delete timerFix[id];\n      return;\n    }\n\n    _clearTimeout(id);\n  };\n}\n\nvar ProfileScreen = function (_Component) {\n  _inherits(ProfileScreen, _Component);\n\n  function ProfileScreen(props) {\n    var _this;\n\n    _classCallCheck(this, ProfileScreen);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProfileScreen).call(this, props));\n    _this.state = {\n      user: {},\n      uid: '',\n      photoURL: null,\n      isAnonymousUser: false\n    };\n    return _this;\n  }\n\n  _createClass(ProfileScreen, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var currentUser = this.props.firebase.auth.currentUser;\n      firebase.firestore().collection('users').doc(currentUser.uid).onSnapshot(function (UserDocument) {\n        AsyncStorage.setItem(\"\" + currentUser.uid, JSON.stringify(UserDocument.data())).then(function () {\n          return _this2.getUserData(currentUser);\n        });\n        console.log(\"Current data: \", UserDocument.data());\n\n        if (currentUser != null && !currentUser.isAnonymous) {\n          _this2.setState({\n            uid: currentUser.uid\n          });\n\n          _this2.getUserData(currentUser);\n\n          _this2.setState({\n            photoURL: UserDocument.data().photoURL,\n            isAnonymousUser: false\n          });\n        } else {\n          _this2.setState({\n            isAnonymousUser: true\n          });\n        }\n      });\n    }\n  }, {\n    key: \"storeUserData\",\n    value: function storeUserData(user) {\n      return _regeneratorRuntime.async(function storeUserData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"\" + user.uid, JSON.stringify(user)));\n\n            case 3:\n              _context.next = 8;\n              break;\n\n            case 5:\n              _context.prev = 5;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(\"Something went wrong\", _context.t0);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 5]]);\n    }\n  }, {\n    key: \"getUserData\",\n    value: function getUserData(user) {\n      var userData, data;\n      return _regeneratorRuntime.async(function getUserData$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"\" + user.uid));\n\n            case 3:\n              userData = _context2.sent;\n              data = JSON.parse(userData);\n              console.log('data', data);\n              this.setState({\n                user: data\n              });\n\n              if (data == null) {\n                this.getUserDocument();\n              }\n\n              _context2.next = 13;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(\"Something went wrong\", _context2.t0);\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, [[0, 10]]);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          user = _this$state.user,\n          photoURL = _this$state.photoURL,\n          isAnonymousUser = _this$state.isAnonymousUser;\n\n      if (isAnonymousUser) {\n        return React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          }\n        }, React.createElement(View, {\n          style: [styles.topBack, {\n            zIndex: -1\n          }],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          }\n        }, React.createElement(View, {\n          style: styles.StatusBar,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          }\n        }, React.createElement(StatusBar, {\n          barStyle: \"light-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          }\n        })), React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          }\n        }, React.createElement(HeaderMenu, {\n          navigation: this.props.navigation,\n          title: \"\",\n          from: \"profile\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          }\n        }))), React.createElement(ScrollView, {\n          style: {\n            width: '100%'\n          },\n          showsVerticalScrollIndicator: false,\n          contentContainerStyle: {\n            flexGrow: 1,\n            justifyContent: 'flex-start',\n            paddingHorizontal: 15\n          },\n          snapToStart: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          }\n        }, React.createElement(View, {\n          style: {\n            width: '100%',\n            left: 120,\n            top: 10,\n            zIndex: 2,\n            height: 30\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          }\n        }, React.createElement(Image, {\n          style: {\n            height: 120,\n            width: 120,\n            borderRadius: 100\n          },\n          source: !photoURL ? require(\"../../assets/images/user.png\") : {\n            uri: photoURL\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          }\n        })), React.createElement(View, {\n          style: {\n            display: \"flex\",\n            marginTop: 120,\n            textAlign: \"center\",\n            justifyContent: 'center',\n            alignItems: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          }\n        }, React.createElement(StyledText, {\n          style: styles.infotxt,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          }\n        }, \" \\u0644\\u0645 \\u062A\\u0633\\u062C\\u0644 \\u062F\\u062E\\u0648\\u0644\\u0643 \\u0628\\u0639\\u062F \\u061F \"), React.createElement(StyledText, {\n          style: styles.infotxt,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          }\n        }, \"  \\u0627\\u0646\\u0636\\u0645 \\u0627\\u0644\\u064A\\u0646\\u0627 \\u062D\\u062A\\u0649 \\u062A\\u0633\\u062A\\u0641\\u064A\\u062F \\u0645\\u0646 \\u062E\\u062F\\u0645\\u0627\\u062A \\u0627\\u0644\\u062A\\u0637\\u0628\\u064A\\u0642\"), React.createElement(StyledText, {\n          style: styles.infotxt,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          }\n        }, \"\\u0648 \\u062A\\u0642\\u0648\\u0645 \\u0628\\u062D\\u062C\\u0632 \\u0627\\u0644\\u0635\\u0627\\u0644\\u0629 \\u0627\\u0644\\u062A\\u064A \\u062A\\u0631\\u064A\\u062F\")), React.createElement(View, {\n          style: {\n            width: '100%',\n            justifyContent: 'center',\n            alignItems: 'center',\n            marginVertical: 20,\n            flexDirection: 'row'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          }\n        }, React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          }\n        }, React.createElement(TouchableOpacity, {\n          activeOpacity: 0.5,\n          onPress: function onPress() {\n            return _this3.props.firebase.auth.signOut().then(function () {\n              return _this3.props.navigation.navigate('LoginScreen');\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          }\n        }, React.createElement(StyledText, {\n          style: {\n            fontSize: 14,\n            marginBottom: 15,\n            color: '#FFF',\n            backgroundColor: '#924480',\n            paddingVertical: 15,\n            paddingHorizontal: 15\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          }\n        }, \"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644\")), React.createElement(View, {\n          style: {\n            display: \"flex\",\n            textAlign: \"center\",\n            justifyContent: 'center',\n            alignItems: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          }\n        }, React.createElement(StyledText, {\n          style: (styles.title2, {\n            textAlign: \"center\"\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          }\n        }, \"\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 \\u062C\\u062F\\u064A\\u062F \\u061F\"), React.createElement(TouchableOpacity, {\n          activeOpacity: 0.5,\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate('RegisterScreen');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          }\n        }, React.createElement(StyledText, {\n          style: {\n            fontSize: 14,\n            color: '#924480',\n            paddingVertical: 15,\n            paddingHorizontal: 15\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          }\n        }, \"\\u0633\\u062C\\u0644 \\u0627\\u0644\\u0622\\u0646\")))))));\n      } else {\n        return React.createElement(View, {\n          style: styles.containerStyle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171\n          }\n        }, React.createElement(View, {\n          style: [styles.topBack, {\n            zIndex: -1\n          }],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          }\n        }, React.createElement(View, {\n          style: styles.StatusBar,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          }\n        }, React.createElement(StatusBar, {\n          barStyle: \"light-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          }\n        })), React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          }\n        }, React.createElement(HeaderMenu, {\n          navigation: this.props.navigation,\n          title: \"\\u062D\\u0633\\u0627\\u0628\\u064A\",\n          from: \"profile\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          }\n        }))), React.createElement(View, {\n          style: {\n            width: '100%',\n            left: 40,\n            top: -50,\n            zIndex: 2,\n            height: 30\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          }\n        }, React.createElement(Image, {\n          style: {\n            height: 100,\n            width: 100,\n            borderRadius: 100 / 2\n          },\n          source: !photoURL ? require(\"../../assets/images/user.png\") : {\n            uri: photoURL\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          }\n        })), React.createElement(ScrollView, {\n          style: {\n            width: '100%'\n          },\n          showsVerticalScrollIndicator: false,\n          contentContainerStyle: {\n            flexGrow: 1,\n            justifyContent: 'flex-start',\n            paddingHorizontal: 15\n          },\n          snapToStart: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          }\n        }, React.createElement(View, {\n          style: {\n            width: '100%',\n            height: '100%',\n            paddingBottom: 50\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          }\n        }, React.createElement(View, {\n          style: styles.info,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          }\n        }, React.createElement(StyledText, {\n          style: styles.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          }\n        }, user.displayName), React.createElement(StyledText, {\n          style: styles.email,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          }\n        }, user.email), React.createElement(View, {\n          style: styles.infoRow,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          }\n        }, React.createElement(View, {\n          style: styles.infoRowinfo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196\n          }\n        }, React.createElement(StyledText, {\n          style: styles.infotxt,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          }\n        }, user.phone)), React.createElement(View, {\n          style: styles.infoRowtitle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199\n          }\n        }, React.createElement(StyledText, {\n          style: styles.title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          }\n        }, \"\\u0627\\u0644\\u0647\\u0627\\u062A\\u0641 :\"))), React.createElement(View, {\n          style: styles.infoRow,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          }\n        }, React.createElement(View, {\n          style: styles.infoRowinfo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          }\n        }, React.createElement(StyledText, {\n          style: styles.infotxt,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          }\n        }, user.city)), React.createElement(View, {\n          style: styles.infoRowtitle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          }\n        }, React.createElement(StyledText, {\n          style: styles.title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209\n          }\n        }, \"\\u0627\\u0644\\u0645\\u062F\\u064A\\u0646\\u0629 :\"))), React.createElement(TouchableOpacity, {\n          style: styles.infoRow2,\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate('EditProfileScreen');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          }\n        }, React.createElement(View, {\n          style: styles.infoRowtitle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          }\n        }, React.createElement(AntDesign, {\n          name: \"left\",\n          size: 20,\n          color: \"#000\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          }\n        })), React.createElement(View, {\n          style: styles.infoRowinfo2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          }\n        }, React.createElement(StyledText, {\n          style: styles.title2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          }\n        }, \"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0627\\u0644\\u0634\\u062E\\u0635\\u064A\"))), React.createElement(TouchableOpacity, {\n          style: styles.infoRow2,\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate('ChangePasswordScreen');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          }\n        }, React.createElement(View, {\n          style: styles.infoRowtitle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227\n          }\n        }, React.createElement(AntDesign, {\n          name: \"left\",\n          size: 20,\n          color: \"#000\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228\n          }\n        })), React.createElement(View, {\n          style: styles.infoRowinfo2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230\n          }\n        }, React.createElement(StyledText, {\n          style: styles.title2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231\n          }\n        }, \"\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\")))), React.createElement(View, {\n          style: styles.joinCont,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236\n          }\n        }, user.manager ? React.createElement(React.Fragment, null, React.createElement(TouchableOpacity, {\n          style: styles.joinTouch,\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate('AddHallScreen');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239\n          }\n        }, React.createElement(StyledText, {\n          style: styles.joinTXT,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243\n          }\n        }, \"\\u0623\\u0636\\u0641 \\u0635\\u0627\\u0644\\u0629 \\u062C\\u062F\\u064A\\u062F\\u0629\")), React.createElement(TouchableOpacity, {\n          style: styles.joinTouch,\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate('ManagerHallsScreen');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 246\n          }\n        }, React.createElement(StyledText, {\n          style: styles.joinTXT,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250\n          }\n        }, \"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u0635\\u0627\\u0644\\u0627\\u062A \\u0627\\u0644\\u062E\\u0627\\u0635\\u0629 \\u0628\\u064A\"))) : React.createElement(TouchableOpacity, {\n          style: styles.joinTouch,\n          onPress: function onPress() {\n            return _this3.props.navigation.navigate('AddHallScreen');\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256\n          }\n        }, React.createElement(StyledText, {\n          style: styles.joinTXT,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          }\n        }, \"\\u0627\\u0646\\u0636\\u0645 \\u0644\\u0623\\u0635\\u062D\\u0627\\u0628 \\u0627\\u0644\\u0635\\u0627\\u0644\\u0627\\u062A\"))))));\n      }\n    }\n  }]);\n\n  return ProfileScreen;\n}(Component);\n\nexport default withFirebaseHOC(ProfileScreen);","map":{"version":3,"sources":["C:/Users/jit/Desktop/farhasheri/screens/ProfileScreen/ProfileScreen.js"],"names":["React","Component","styles","HeaderMenu","StyledText","AntDesign","withFirebaseHOC","AsyncStorage","firebase","_setTimeout","global","setTimeout","_clearTimeout","clearTimeout","MAX_TIMER_DURATION_MS","Platform","OS","timerFix","runTask","id","fn","ttl","args","waitingTime","Date","now","InteractionManager","runAfterInteractions","afterTime","Math","min","time","Object","keys","length","startsWith","ProfileScreen","props","state","user","uid","photoURL","isAnonymousUser","currentUser","auth","firestore","collection","doc","onSnapshot","UserDocument","setItem","JSON","stringify","data","then","getUserData","console","log","isAnonymous","setState","getItem","userData","parse","getUserDocument","topBack","zIndex","StatusBar","navigation","width","flexGrow","justifyContent","paddingHorizontal","left","top","height","borderRadius","require","uri","display","marginTop","textAlign","alignItems","infotxt","marginVertical","flexDirection","signOut","navigate","fontSize","marginBottom","color","backgroundColor","paddingVertical","title2","containerStyle","paddingBottom","info","name","displayName","email","infoRow","infoRowinfo","phone","infoRowtitle","title","city","infoRow2","infoRowinfo2","joinCont","manager","joinTouch","joinTXT"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { View, ScrollView, StatusBar,Image,TouchableOpacity } from \"react-native\";\r\nimport styles from \"./ProfileScreenStyle\";\r\nimport HeaderMenu from '../../components/HeadersComponent/HeaderMenu'\r\nimport StyledText from \"../../components/StyledTexts/StyledText\";\r\nimport {AntDesign} from '@expo/vector-icons';\r\nimport { withFirebaseHOC } from '../../config/Firebase'\r\nimport AsyncStorage from '@react-native-community/async-storage';\r\nimport * as firebase from 'firebase';\r\n///////////////////////////////////////For Notification to solve error message \r\n\r\nconst _setTimeout = global.setTimeout;\r\nconst _clearTimeout = global.clearTimeout;\r\nconst MAX_TIMER_DURATION_MS = 60 * 1000;\r\nif (Platform.OS === 'android') {\r\n// Work around issue `Setting a timer for long time`\r\n// see: https://github.com/firebase/firebase-js-sdk/issues/97\r\n    const timerFix = {};\r\n    const runTask = (id, fn, ttl, args) => {\r\n        const waitingTime = ttl - Date.now();\r\n        if (waitingTime <= 1) {\r\n            InteractionManager.runAfterInteractions(() => {\r\n                if (!timerFix[id]) {\r\n                    return;\r\n                }\r\n                delete timerFix[id];\r\n                fn(...args);\r\n            });\r\n            return;\r\n        }\r\n        const afterTime = Math.min(waitingTime, MAX_TIMER_DURATION_MS);\r\n        timerFix[id] = _setTimeout(() => runTask(id, fn, ttl, args), afterTime);\r\n    };\r\n    global.setTimeout = (fn, time, ...args) => {\r\n        if (MAX_TIMER_DURATION_MS < time) {\r\n            const ttl = Date.now() + time;\r\n            const id = '_lt_' + Object.keys(timerFix).length;\r\n            runTask(id, fn, ttl, args);\r\n            return id;\r\n        }\r\n        return _setTimeout(fn, time, ...args);\r\n    };\r\n    global.clearTimeout = id => {\r\n        if (typeof id === 'string' && id.startsWith('_lt_')) {\r\n            _clearTimeout(timerFix[id]);\r\n            delete timerFix[id];\r\n            return;\r\n        }\r\n        _clearTimeout(id);\r\n    };\r\n}\r\n//////////////////////////////////////////////////\r\n\r\n\r\n\r\nclass ProfileScreen extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {          \r\n            user: {},\r\n            uid:'',\r\n            photoURL:null,\r\n            isAnonymousUser: false\r\n        }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        const currentUser = this.props.firebase.auth.currentUser;\r\n       firebase.firestore().collection('users').doc(currentUser.uid)\r\n        .onSnapshot((UserDocument) => {\r\n            AsyncStorage.setItem(`${currentUser.uid}`, JSON.stringify(UserDocument.data()))\r\n                .then(()=>this.getUserData(currentUser));\r\n\r\n                \r\n            console.log(\"Current data: \", UserDocument.data());\r\n      \r\n            if(currentUser != null && !currentUser.isAnonymous) {\r\n                this.setState({uid:currentUser.uid});\r\n            this.getUserData(currentUser);\r\n            this.setState({photoURL:UserDocument.data().photoURL,\r\n                isAnonymousUser:false});\r\n            }else {\r\n                this.setState({isAnonymousUser:true})\r\n            }\r\n        });\r\n    }\r\n\r\n    async storeUserData(user) {\r\n        \r\n        try {\r\n           await AsyncStorage.setItem(`${user.uid}`, JSON.stringify(user));\r\n        } catch (error) {\r\n          console.log(\"Something went wrong\", error);\r\n        }\r\n      }\r\n\r\n      \r\n\r\n      async getUserData(user) {\r\n        try {\r\n          let userData = await AsyncStorage.getItem(`${user.uid}`);\r\n          let data = JSON.parse(userData);\r\n          console.log('data', data)\r\n          this.setState({user:data})\r\n          if(data == null) {\r\n              this.getUserDocument()\r\n          }\r\n        \r\n        } catch (error) {\r\n          console.log(\"Something went wrong\", error);\r\n        }\r\n      }\r\n\r\n    render() {\r\n        const {user,photoURL,isAnonymousUser} = this.state;\r\n      \r\n        if (isAnonymousUser) {\r\n            return (\r\n                \r\n        <View >          \r\n            <View style={[styles.topBack,{zIndex:-1}]}>\r\n                <View style={styles.StatusBar}>\r\n                    <StatusBar barStyle=\"light-content\"/>\r\n                </View>\r\n                <View>\r\n                    <HeaderMenu navigation={this.props.navigation} title='' from='profile'></HeaderMenu>\r\n                </View>\r\n            </View>\r\n            <ScrollView\r\n                style={{ width: '100%' }}\r\n                showsVerticalScrollIndicator={false}\r\n                contentContainerStyle={{flexGrow:1,justifyContent:'flex-start',paddingHorizontal:15}}\r\n                snapToStart={true}\r\n            >   \r\n            <View style={{width:'100%',left:120,top:10,zIndex:2,height:30}}>\r\n                <Image style={{height:120,width:120,borderRadius:100}}\r\n                    source={!photoURL ? require('../../assets/images/user.png') : {uri:photoURL}} />\r\n            </View>\r\n\r\n            <View style={{display:\"flex\",marginTop:120,textAlign:\"center\",justifyContent:'center',alignItems:'center'}}>\r\n                <StyledText style={styles.infotxt}> لم تسجل دخولك بعد ؟ </StyledText>\r\n                <StyledText style={styles.infotxt}>  انضم الينا حتى تستفيد من خدمات التطبيق</StyledText>\r\n                <StyledText style={styles.infotxt}>و تقوم بحجز الصالة التي تريد</StyledText>\r\n            </View>\r\n\r\n            <View style={{width:'100%',justifyContent:'center',alignItems:'center',marginVertical:20,flexDirection:'row'}}>\r\n          \r\n                <View>\r\n                     <TouchableOpacity activeOpacity={0.5}\r\n                          onPress={() => this.props.firebase.auth.signOut().then(()=>this.props.navigation.navigate('LoginScreen'))}\r\n                        >\r\n                          <StyledText style={{fontSize:14,marginBottom:15, \r\n                            color:'#FFF',backgroundColor:'#924480',paddingVertical:15,paddingHorizontal:15}}>تسجيل الدخول</StyledText>\r\n                        </TouchableOpacity>\r\n                        <View style={{display:\"flex\",textAlign:\"center\",justifyContent:'center',alignItems:'center'}}>\r\n                          <StyledText style={styles.title2,{textAlign:\"center\"}}>مستخدم جديد ؟</StyledText>\r\n                          <TouchableOpacity activeOpacity={0.5}\r\n                          onPress={() => this.props.navigation.navigate('RegisterScreen')}\r\n                        >\r\n                          <StyledText style={{fontSize:14,color:'#924480',paddingVertical:15,paddingHorizontal:15}}>سجل الآن</StyledText>\r\n                        </TouchableOpacity>\r\n                        </View>\r\n                </View>\r\n                </View>\r\n            </ScrollView>\r\n        </View>\r\n\r\n            )\r\n        }else {\r\n        return (\r\n        <View style={styles.containerStyle}>          \r\n            <View style={[styles.topBack,{zIndex:-1}]}>\r\n                <View style={styles.StatusBar}>\r\n                    <StatusBar barStyle=\"light-content\"/>\r\n                </View>\r\n                <View>\r\n                    <HeaderMenu navigation={this.props.navigation} title='حسابي' from='profile'></HeaderMenu>\r\n                </View>\r\n            </View>\r\n            <View style={{width:'100%',left:40,top:-50,zIndex:2,height:30}}>\r\n                <Image style={{height:100,width:100,borderRadius:100/2}}\r\n                    source={!photoURL ? require('../../assets/images/user.png') : {uri:photoURL}} />\r\n            </View>\r\n            <ScrollView\r\n                style={{ width: '100%' }}\r\n                showsVerticalScrollIndicator={false}\r\n                contentContainerStyle={{flexGrow:1,justifyContent:'flex-start',paddingHorizontal:15}}\r\n                snapToStart={true}\r\n            >     \r\n                <View style={{width: '100%',height:'100%',paddingBottom: 50}}>\r\n                    <View style={styles.info}>\r\n        <StyledText style={styles.name}>{user.displayName}</StyledText>\r\n        <StyledText style={styles.email}>{user.email}</StyledText>\r\n\r\n                        <View style={styles.infoRow}>\r\n                            <View style={styles.infoRowinfo}>\r\n                               <StyledText style={styles.infotxt}>{user.phone}</StyledText>\r\n                            </View>\r\n                            <View style={styles.infoRowtitle}>\r\n                                <StyledText style={styles.title}>الهاتف :</StyledText>\r\n                            </View>\r\n                        </View>\r\n\r\n                        <View style={styles.infoRow}>\r\n                            <View style={styles.infoRowinfo}>\r\n                                <StyledText style={styles.infotxt}>{user.city}</StyledText>\r\n                            </View>\r\n                            <View style={styles.infoRowtitle}>\r\n                                <StyledText style={styles.title}>المدينة :</StyledText>\r\n                            </View>\r\n                        </View>\r\n\r\n                        <TouchableOpacity style={styles.infoRow2}\r\n                          onPress={() => this.props.navigation.navigate('EditProfileScreen')}\r\n                        >\r\n                            <View style={styles.infoRowtitle}>\r\n                                <AntDesign name='left' size={20} color='#000'/>\r\n                            </View>\r\n                            <View style={styles.infoRowinfo2}>\r\n                                <StyledText style={styles.title2}>تعديل الملف الشخصي</StyledText>\r\n                            </View>\r\n                        </TouchableOpacity>\r\n\r\n                        <TouchableOpacity style={styles.infoRow2}\r\n                          onPress={() => this.props.navigation.navigate('ChangePasswordScreen')}\r\n                        >\r\n                            <View style={styles.infoRowtitle}>\r\n                                <AntDesign name='left' size={20} color='#000'/>\r\n                            </View>\r\n                            <View style={styles.infoRowinfo2}>\r\n                                <StyledText style={styles.title2}>تغيير كلمة المرور</StyledText>\r\n                            </View>\r\n                        </TouchableOpacity>\r\n                    </View>\r\n\r\n                    <View style={styles.joinCont}>\r\n                        {user.manager ? \r\n                        <>\r\n                        <TouchableOpacity style={styles.joinTouch}\r\n                        //    onPress={() => this.props.navigation.navigate('AddRoomScreen')}\r\n                        onPress={() => this.props.navigation.navigate('AddHallScreen')}\r\n                        >\r\n                            <StyledText style={styles.joinTXT}>أضف صالة جديدة</StyledText>\r\n                        </TouchableOpacity>\r\n                        \r\n                        <TouchableOpacity style={styles.joinTouch}\r\n                        //    onPress={() => this.props.navigation.navigate('AddRoomScreen')}\r\n                        onPress={() => this.props.navigation.navigate('ManagerHallsScreen')}\r\n                        >\r\n                            <StyledText style={styles.joinTXT}>عرض الصالات الخاصة بي</StyledText>\r\n                        </TouchableOpacity>\r\n                        </>\r\n\r\n\r\n                        :\r\n                        <TouchableOpacity style={styles.joinTouch}\r\n                        onPress={() => this.props.navigation.navigate('AddHallScreen')}\r\n                    >\r\n                        <StyledText style={styles.joinTXT}>انضم لأصحاب الصالات</StyledText>\r\n                    </TouchableOpacity>\r\n                        }\r\n                    </View>\r\n                </View>\r\n            </ScrollView>\r\n        </View>\r\n        );\r\n    }\r\n    }\r\n}\r\n\r\nexport default withFirebaseHOC(ProfileScreen)"]},"metadata":{},"sourceType":"module"}