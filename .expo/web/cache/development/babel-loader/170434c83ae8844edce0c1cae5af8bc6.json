{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\jit\\\\Desktop\\\\farhasheri\\\\components\\\\OrderList.js\";\nimport * as React from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyledText from \"./StyledTexts/StyledText\";\nimport { AntDesign, Entypo } from \"@expo/vector-icons\";\nimport * as firebase from 'firebase';\n\nvar OrderList = function (_React$Component) {\n  _inherits(OrderList, _React$Component);\n\n  function OrderList(props) {\n    var _this;\n\n    _classCallCheck(this, OrderList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(OrderList).call(this, props));\n    _this.state = {\n      accepted: false\n    };\n    return _this;\n  }\n\n  _createClass(OrderList, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var orderList = this.props.details;\n      return React.createElement(React.Fragment, null, React.createElement(FlatList, {\n        style: {\n          flex: 1\n        },\n        showsVerticalScrollIndicator: false,\n        contentContainerStyle: {\n          marginTop: 30\n        },\n        snapToStart: true,\n        data: orderList,\n        extraData: this.props,\n        numColumns: 1,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item,\n              index = _ref.index;\n          return React.createElement(View, {\n            key: index,\n            style: styles.container,\n            activeOpacity: 0.8,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 40\n            }\n          }, React.createElement(View, {\n            style: styles.detailCont,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 41\n            }\n          }, React.createElement(StyledText, {\n            style: [styles.orderTxtDetail, {\n              color: '#A2A2A2',\n              fontSize: 12\n            }],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 42\n            }\n          }, item.rigesterDate), React.createElement(StyledText, {\n            style: styles.orderTxtDetail,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 45\n            }\n          }, \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0637\\u0644\\u0628 : \", item.orderNumber), React.createElement(StyledText, {\n            style: styles.orderTxtDetail,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 48\n            }\n          }, \"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0635\\u0627\\u0644\\u0629 : \", item.hallName), React.createElement(StyledText, {\n            style: styles.orderTxtDetail,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 51\n            }\n          }, \"\\u0642\\u0627\\u0639\\u0629: \", item.roomName), React.createElement(StyledText, {\n            style: styles.orderTxtDetail,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 54\n            }\n          }, \"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645 : \", item.userName), React.createElement(StyledText, {\n            style: styles.orderTxtDetail,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            }\n          }, \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062A\\u0648\\u0627\\u0635\\u0644: \", item.userPhone)), item.orderStatus || _this2.state.accepted ? React.createElement(React.Fragment, null, React.createElement(StyledText, {\n            style: styles.accept,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64\n            }\n          }, \"\\u062A\\u0645 \\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062D\\u062C\\u0632 \\u2705\")) : React.createElement(React.Fragment, null, React.createElement(View, {\n            style: styles.btnCont,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            }\n          }, React.createElement(TouchableOpacity, {\n            style: styles.btn,\n            onPress: function onPress() {\n              return _this2.acceptOrder(item.id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            }\n          }, React.createElement(StyledText, {\n            style: {\n              color: '#fff'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 75\n            }\n          }, \" \\u062A\\u0623\\u0643\\u064A\\u062F \\u0627\\u0644\\u062D\\u062C\\u0632\"))), React.createElement(View, {\n            style: styles.btnCont,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            }\n          }, React.createElement(TouchableOpacity, {\n            style: styles.btn2,\n            onPress: function onPress() {\n              return _this2.reject(item.id, item.userId, item.roomName);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79\n            }\n          }, React.createElement(StyledText, {\n            style: {\n              color: '#fff'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 82\n            }\n          }, \"\\u0631\\u0641\\u0636 \\u0627\\u0644\\u062D\\u062C\\u0632\")))));\n        },\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        }\n      }));\n    }\n  }, {\n    key: \"acceptOrder\",\n    value: function acceptOrder(id) {\n      firebase.firestore().collection('registration').doc(id).update({\n        orderStatus: true\n      });\n    }\n  }, {\n    key: \"reject\",\n    value: function reject(hallId, userId, roomName) {\n      var _this3 = this;\n\n      var userInfo = firebase.firestore().collection(\"users\");\n      var query = userInfo.where(\"uid\", \"==\", userId).get().then(function (querySnapshot) {\n        querySnapshot.forEach(function (doc) {\n          var expoToken = doc.data().expoPushToken;\n\n          _this3.sendPushNotification(expoToken, roomName);\n        });\n      }).catch(function (error) {\n        console.log(\"Error getting documents: \", error);\n      });\n      firebase.firestore().collection('registration').doc(hallId).delete();\n    }\n  }, {\n    key: \"sendPushNotification\",\n    value: function sendPushNotification(expoPushToken, roomName) {\n      var message;\n      return _regeneratorRuntime.async(function sendPushNotification$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              message = {\n                to: expoPushToken,\n                sound: 'default',\n                title: 'Farha App',\n                body: \"\\u0646\\u0623\\u0633\\u0641, \\u062A\\u0645 \\u0631\\u0641\\u0636 \\u0637\\u0644\\u0628 \\u062D\\u062C\\u0632 \" + roomName + \" \\u0644\\u062A\\u0623\\u062E\\u0631\\u0643 \\u0641\\u064A \\u062F\\u0641\\u0639 \\u0627\\u0644\\u0639\\u0631\\u0628\\u0648\\u0646\"\n              };\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(fetch('https://exp.host/--/api/v2/push/send', {\n                method: 'POST',\n                mode: 'no-cors',\n                headers: {\n                  Accept: 'application/json',\n                  'Accept-encoding': 'gzip, deflate',\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(message)\n              }).then(function (response) {\n                return console.log(response.text());\n              }));\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }\n  }]);\n\n  return OrderList;\n}(React.Component);\n\nexport { OrderList as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    borderRadius: 15,\n    backgroundColor: '#fff',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginHorizontal: 10,\n    marginVertical: 10,\n    flexDirection: 'column',\n    borderColor: '#E4E4E4',\n    borderWidth: 1,\n    height: \"100%\"\n  },\n  detailCont: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    alignItems: 'flex-end',\n    height: '100%'\n  },\n  btnCont: {\n    width: '100%',\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  btn: {\n    height: 50,\n    backgroundColor: '#49BD78',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '80%',\n    marginTop: 10,\n    borderRadius: 15\n  },\n  btn2: {\n    height: 50,\n    backgroundColor: '#EC3C3D',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '80%',\n    marginTop: 10,\n    marginBottom: 10,\n    borderRadius: 15\n  },\n  orderTxtDetail: {\n    width: '100%',\n    textAlign: 'right',\n    marginVertical: 5\n  },\n  accept: {\n    marginTop: 15,\n    color: '#49BD78',\n    marginBottom: 15,\n    fontSize: 20,\n    fontWeight: 'bold'\n  }\n});","map":{"version":3,"sources":["C:/Users/jit/Desktop/farhasheri/components/OrderList.js"],"names":["React","StyledText","AntDesign","Entypo","firebase","OrderList","props","state","accepted","orderList","details","flex","marginTop","item","index","styles","container","detailCont","orderTxtDetail","color","fontSize","rigesterDate","orderNumber","hallName","roomName","userName","userPhone","orderStatus","accept","btnCont","btn","acceptOrder","id","btn2","reject","userId","toString","firestore","collection","doc","update","hallId","userInfo","query","where","get","then","querySnapshot","forEach","expoToken","data","expoPushToken","sendPushNotification","catch","error","console","log","delete","message","to","sound","title","body","fetch","method","mode","headers","Accept","JSON","stringify","response","text","Component","StyleSheet","create","borderRadius","backgroundColor","justifyContent","alignItems","marginHorizontal","marginVertical","flexDirection","borderColor","borderWidth","height","width","marginBottom","textAlign","fontWeight"],"mappings":";;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;;;;;;AAEA,OAAOC,UAAP;AACA,SAASC,SAAT,EAAoBC,MAApB,QAAkC,oBAAlC;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;;IAEqBC,S;;;AACjB,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,mFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,QAAQ,EAAE;AADD,KAAb;AAFe;AAKlB;;;;6BAGQ;AAAA;;AACL,UAAIC,SAAS,GAAG,KAAKH,KAAL,CAAWI,OAA3B;AAYA,aACA,0CACI,oBAAC,QAAD;AACI,QAAA,KAAK,EAAE;AAACC,UAAAA,IAAI,EAAE;AAAP,SADX;AAEI,QAAA,4BAA4B,EAAE,KAFlC;AAGI,QAAA,qBAAqB,EAAE;AAACC,UAAAA,SAAS,EAAC;AAAX,SAH3B;AAII,QAAA,WAAW,EAAE,IAJjB;AAKI,QAAA,IAAI,EAAEH,SALV;AAMI,QAAA,SAAS,EAAE,KAAKH,KANpB;AAOI,QAAA,UAAU,EAAE,CAPhB;AAQI,QAAA,UAAU,EAAE;AAAA,cAAEO,IAAF,QAAEA,IAAF;AAAA,cAAQC,KAAR,QAAQA,KAAR;AAAA,iBACR,oBAAC,IAAD;AAAM,YAAA,GAAG,EAAEA,KAAX;AAAkB,YAAA,KAAK,EAAEC,MAAM,CAACC,SAAhC;AAA2C,YAAA,aAAa,EAAE,GAA1D;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,IAAD;AAAM,YAAA,KAAK,EAAED,MAAM,CAACE,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,UAAD;AAAY,YAAA,KAAK,EAAE,CAACF,MAAM,CAACG,cAAR,EAAuB;AAACC,cAAAA,KAAK,EAAC,SAAP;AAAiBC,cAAAA,QAAQ,EAAE;AAA3B,aAAvB,CAAnB;AAAA;AAAA;AAAA;AAAA;AAAA,aACKP,IAAI,CAACQ,YADV,CADJ,EAII,oBAAC,UAAD;AAAY,YAAA,KAAK,EAAEN,MAAM,CAACG,cAA1B;AAAA;AAAA;AAAA;AAAA;AAAA,qEACiBL,IAAI,CAACS,WADtB,CAJJ,EAOI,oBAAC,UAAD;AAAY,YAAA,KAAK,EAAEP,MAAM,CAACG,cAA1B;AAAA;AAAA;AAAA;AAAA;AAAA,2EACkBL,IAAI,CAACU,QADvB,CAPJ,EAUI,oBAAC,UAAD;AAAY,YAAA,KAAK,EAAER,MAAM,CAACG,cAA1B;AAAA;AAAA;AAAA;AAAA;AAAA,2CACYL,IAAI,CAACW,QADjB,CAVJ,EAaI,oBAAC,UAAD;AAAY,YAAA,KAAK,EAAET,MAAM,CAACG,cAA1B;AAAA;AAAA;AAAA;AAAA;AAAA,uFACoBL,IAAI,CAACY,QADzB,CAbJ,EAgBI,oBAAC,UAAD;AAAY,YAAA,KAAK,EAAEV,MAAM,CAACG,cAA1B;AAAA;AAAA;AAAA;AAAA;AAAA,gFACkBL,IAAI,CAACa,SADvB,CAhBJ,CADJ,EAsBQb,IAAI,CAACc,WAAL,IAAoB,MAAI,CAACpB,KAAL,CAAWC,QAA/B,GACA,0CACC,oBAAC,UAAD;AAAY,YAAA,KAAK,EAAEO,MAAM,CAACa,MAA1B;AAAA;AAAA;AAAA;AAAA;AAAA,iGADD,CADA,GAQA,0CACA,oBAAC,IAAD;AAAM,YAAA,KAAK,EAAEb,MAAM,CAACc,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA,aACA,oBAAC,gBAAD;AAAkB,YAAA,KAAK,EAAEd,MAAM,CAACe,GAAhC;AACI,YAAA,OAAO,EAAE;AAAA,qBAAI,MAAI,CAACC,WAAL,CAAiBlB,IAAI,CAACmB,EAAtB,CAAJ;AAAA,aADb;AAAA;AAAA;AAAA;AAAA;AAAA,aAGQ,oBAAC,UAAD;AAAY,YAAA,KAAK,EAAE;AAACb,cAAAA,KAAK,EAAC;AAAP,aAAnB;AAAA;AAAA;AAAA;AAAA;AAAA,8EAHR,CADA,CADA,EAQA,oBAAC,IAAD;AAAM,YAAA,KAAK,EAAEJ,MAAM,CAACc,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA,aACI,oBAAC,gBAAD;AAAkB,YAAA,KAAK,EAAEd,MAAM,CAACkB,IAAhC;AACI,YAAA,OAAO,EAAE;AAAA,qBAAI,MAAI,CAACC,MAAL,CAAYrB,IAAI,CAACmB,EAAjB,EAAoBnB,IAAI,CAACsB,MAAzB,EAAgCtB,IAAI,CAACW,QAArC,CAAJ;AAAA,aADb;AAAA;AAAA;AAAA;AAAA;AAAA,aAGI,oBAAC,UAAD;AAAY,YAAA,KAAK,EAAE;AAACL,cAAAA,KAAK,EAAC;AAAP,aAAnB;AAAA;AAAA;AAAA;AAAA;AAAA,iEAHJ,CADJ,CARA,CA9BR,CADQ;AAAA,SARhB;AAwEI,QAAA,YAAY,EAAE,sBAACN,IAAD,EAAOC,KAAP;AAAA,iBAAiBA,KAAK,CAACsB,QAAN,EAAjB;AAAA,SAxElB;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADA;AA8EH;;;gCAEWJ,E,EAAI;AACZ5B,MAAAA,QAAQ,CAACiC,SAAT,GAAqBC,UAArB,CAAgC,cAAhC,EAAgDC,GAAhD,CAAoDP,EAApD,EACCQ,MADD,CACQ;AACJb,QAAAA,WAAW,EAAE;AADT,OADR;AAIH;;;2BAEMc,M,EAAQN,M,EAAOX,Q,EAAU;AAAA;;AAC5B,UAAIkB,QAAQ,GAAGtC,QAAQ,CAACiC,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,CAAf;AACA,UAAIK,KAAK,GAAGD,QAAQ,CAACE,KAAT,CAAe,KAAf,EAAsB,IAAtB,EAA4BT,MAA5B,EACHU,GADG,GAEHC,IAFG,CAEE,UAACC,aAAD,EAAmB;AACzBA,QAAAA,aAAa,CAACC,OAAd,CAAsB,UAACT,GAAD,EAAS;AAC/B,cAAIU,SAAS,GAAGV,GAAG,CAACW,IAAJ,GAAWC,aAA3B;;AACK,UAAA,MAAI,CAACC,oBAAL,CAA0BH,SAA1B,EAAoCzB,QAApC;AACD,SAHJ;AAIC,OAPG,EAQH6B,KARG,CAQG,UAASC,KAAT,EAAgB;AAClBC,QAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCF,KAAzC;AACJ,OAVG,CAAZ;AAYAlD,MAAAA,QAAQ,CAACiC,SAAT,GAAqBC,UAArB,CAAgC,cAAhC,EAAgDC,GAAhD,CAAoDE,MAApD,EACCgB,MADD;AAEH;;;yCAG0BN,a,EAAc3B,Q;;;;;;AAC/BkC,cAAAA,O,GAAU;AACZC,gBAAAA,EAAE,EAAER,aADQ;AAEZS,gBAAAA,KAAK,EAAE,SAFK;AAGZC,gBAAAA,KAAK,EAAE,WAHK;AAIZC,gBAAAA,IAAI,uGAA0BtC,QAA1B;AAJQ,e;;+CAQVuC,KAAK,CAAC,sCAAD,EAAyC;AAChDC,gBAAAA,MAAM,EAAE,MADwC;AAEhDC,gBAAAA,IAAI,EAAE,SAF0C;AAGhDC,gBAAAA,OAAO,EAAE;AACLC,kBAAAA,MAAM,EAAE,kBADH;AAEL,qCAAmB,eAFd;AAGL,kCAAgB;AAHX,iBAHuC;AAQhDL,gBAAAA,IAAI,EAAEM,IAAI,CAACC,SAAL,CAAeX,OAAf;AAR0C,eAAzC,CAAL,CASHZ,IATG,CASE,UAAAwB,QAAQ;AAAA,uBAAIf,OAAO,CAACC,GAAR,CAAYc,QAAQ,CAACC,IAAT,EAAZ,CAAJ;AAAA,eATV,C;;;;;;;;;;;;EAzIyBvE,KAAK,CAACwE,S;;SAAxBnE,S;AAwJrB,IAAMU,MAAM,GAAG0D,UAAU,CAACC,MAAX,CAAkB;AAC7B1D,EAAAA,SAAS,EAAE;AAACL,IAAAA,IAAI,EAAC,CAAN;AAASgE,IAAAA,YAAY,EAAE,EAAvB;AAA0BC,IAAAA,eAAe,EAAC,MAA1C;AACPC,IAAAA,cAAc,EAAC,QADR;AACiBC,IAAAA,UAAU,EAAC,QAD5B;AACqCC,IAAAA,gBAAgB,EAAC,EADtD;AACyDC,IAAAA,cAAc,EAAC,EADxE;AAEPC,IAAAA,aAAa,EAAC,QAFP;AAEgBC,IAAAA,WAAW,EAAC,SAF5B;AAEsCC,IAAAA,WAAW,EAAC,CAFlD;AAEoDC,IAAAA,MAAM,EAAC;AAF3D,GADkB;AAK7BnE,EAAAA,UAAU,EAAC;AAACN,IAAAA,IAAI,EAAC,CAAN;AAAQkE,IAAAA,cAAc,EAAC,YAAvB;AAAoCC,IAAAA,UAAU,EAAC,UAA/C;AAA0DM,IAAAA,MAAM,EAAC;AAAjE,GALkB;AAM7BvD,EAAAA,OAAO,EAAC;AAAEwD,IAAAA,KAAK,EAAC,MAAR;AAAe1E,IAAAA,IAAI,EAAE,CAArB;AACRsE,IAAAA,aAAa,EAAE,QADP;AAERJ,IAAAA,cAAc,EAAE,QAFR;AAGRC,IAAAA,UAAU,EAAE;AAHJ,GANqB;AAU7BhD,EAAAA,GAAG,EAAC;AAACsD,IAAAA,MAAM,EAAC,EAAR;AAAWR,IAAAA,eAAe,EAAC,SAA3B;AAAqCC,IAAAA,cAAc,EAAC,QAApD;AAA6DC,IAAAA,UAAU,EAAC,QAAxE;AAAiFO,IAAAA,KAAK,EAAC,KAAvF;AACFzE,IAAAA,SAAS,EAAE,EADT;AACa+D,IAAAA,YAAY,EAAC;AAD1B,GAVyB;AAe7B1C,EAAAA,IAAI,EAAC;AAACmD,IAAAA,MAAM,EAAC,EAAR;AAAWR,IAAAA,eAAe,EAAC,SAA3B;AAAqCC,IAAAA,cAAc,EAAC,QAApD;AAA6DC,IAAAA,UAAU,EAAC,QAAxE;AAAiFO,IAAAA,KAAK,EAAC,KAAvF;AAA6FzE,IAAAA,SAAS,EAAC,EAAvG;AAA0G0E,IAAAA,YAAY,EAAC,EAAvH;AACRX,IAAAA,YAAY,EAAC;AADL,GAfwB;AAkB7BzD,EAAAA,cAAc,EAAC;AAACmE,IAAAA,KAAK,EAAC,MAAP;AAAcE,IAAAA,SAAS,EAAC,OAAxB;AAAgCP,IAAAA,cAAc,EAAC;AAA/C,GAlBc;AAmB7BpD,EAAAA,MAAM,EAAC;AAAChB,IAAAA,SAAS,EAAC,EAAX;AAAcO,IAAAA,KAAK,EAAC,SAApB;AAA8BmE,IAAAA,YAAY,EAAC,EAA3C;AAA8ClE,IAAAA,QAAQ,EAAC,EAAvD;AAA0DoE,IAAAA,UAAU,EAAC;AAArE;AAnBsB,CAAlB,CAAf","sourcesContent":["import * as React from \"react\";\r\nimport { StyleSheet, View, Image, TouchableOpacity , FlatList } from \"react-native\";\r\nimport StyledText from './StyledTexts/StyledText';\r\nimport { AntDesign, Entypo } from \"@expo/vector-icons\";\r\nimport * as firebase from 'firebase';\r\n\r\nexport default class OrderList extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            accepted: false\r\n        }\r\n    }\r\n\r\n    \r\n    render() {\r\n        let orderList = this.props.details\r\n\r\n        // {id:0,hallName:'اسم الصالة',orderNum:'123456',orderDate:'16/6/2020',orderTime:'7:30'}\r\n\r\n        // {\r\n        //     rigesterDate: orderData.registerDate,\r\n        //     orderNumber:  doc.id,\r\n        //     hallName: orderData.hallName,\r\n        //     roomName: orderData.roomName,\r\n        //     userName: orderData.userName,\r\n        //     userPhone: orderData.userPhone\r\n        //    }\r\n        return (\r\n        <>\r\n            <FlatList\r\n                style={{flex: 1}}\r\n                showsVerticalScrollIndicator={false}\r\n                contentContainerStyle={{marginTop:30}}\r\n                snapToStart={true}\r\n                data={orderList}\r\n                extraData={this.props}\r\n                numColumns={1}\r\n                renderItem={({item, index})=>(\r\n                    <View key={index} style={styles.container} activeOpacity={0.8}>\r\n                        <View style={styles.detailCont}>\r\n                            <StyledText style={[styles.orderTxtDetail,{color:'#A2A2A2',fontSize: 12}]}>\r\n                                {item.rigesterDate}    \r\n                            </StyledText>\r\n                            <StyledText style={styles.orderTxtDetail}>\r\n                                رقم الطلب : {item.orderNumber}\r\n                            </StyledText>\r\n                            <StyledText style={styles.orderTxtDetail}>\r\n                                اسم الصالة : {item.hallName}\r\n                            </StyledText>\r\n                            <StyledText style={styles.orderTxtDetail}>\r\n                                 قاعة: {item.roomName}\r\n                            </StyledText>\r\n                            <StyledText style={styles.orderTxtDetail}>\r\n                                اسم المستخدم : {item.userName}\r\n                            </StyledText>\r\n                            <StyledText style={styles.orderTxtDetail}>\r\n                                رقم التواصل: {item.userPhone}\r\n                            </StyledText>\r\n                        </View>\r\n                        {\r\n                            item.orderStatus || this.state.accepted ? \r\n                            <>\r\n                             <StyledText style={styles.accept}>\r\n                                تم تأكيد الحجز ✅\r\n                            </StyledText>\r\n                            </>\r\n                            :\r\n\r\n                            <>\r\n                            <View style={styles.btnCont}>\r\n                            <TouchableOpacity style={styles.btn}\r\n                                onPress={()=>this.acceptOrder(item.id)}\r\n                            >\r\n                                    <StyledText style={{color:'#fff'}}> تأكيد الحجز</StyledText>\r\n                                </TouchableOpacity>\r\n                            </View>\r\n                            <View style={styles.btnCont}>\r\n                                <TouchableOpacity style={styles.btn2}\r\n                                    onPress={()=>this.reject(item.id,item.userId,item.roomName)}\r\n                                >\r\n                                    <StyledText style={{color:'#fff'}}>رفض الحجز</StyledText>\r\n                                </TouchableOpacity>\r\n                            </View>\r\n                            </>\r\n\r\n                        }\r\n                        {/* <View style={styles.btnCont}>\r\n                            <TouchableOpacity style={styles.btn}\r\n                                onPress={()=>this.props.navigation.navigate('OrderDetailScreen')}\r\n                            >\r\n                                <StyledText style={{color:'#fff'}}>تم تأكيد الحجز</StyledText>\r\n                            </TouchableOpacity>\r\n                            \r\n                            <TouchableOpacity style={styles.btn}\r\n                                onPress={()=>this.props.navigation.navigate('OrderDetailScreen')}\r\n                            >\r\n                                <StyledText style={{color:'#fff'}}>رفض الحجز</StyledText>\r\n                            </TouchableOpacity>\r\n                        </View> */}\r\n                    </View>\r\n                )}\r\n                keyExtractor={(item, index) => index.toString()}\r\n            />\r\n        </>\r\n        );\r\n    }\r\n\r\n    acceptOrder(id) {\r\n        firebase.firestore().collection('registration').doc(id)\r\n        .update({\r\n            orderStatus: true\r\n        })\r\n    }\r\n\r\n    reject(hallId, userId,roomName) {\r\n        let userInfo = firebase.firestore().collection(\"users\");\r\n        let query = userInfo.where(\"uid\", \"==\", userId)\r\n                .get()\r\n                .then((querySnapshot) => {\r\n                querySnapshot.forEach((doc) => {\r\n                let expoToken = doc.data().expoPushToken;\r\n                     this.sendPushNotification(expoToken,roomName);\r\n                   });\r\n                })\r\n                .catch(function(error) {\r\n                     console.log(\"Error getting documents: \", error);\r\n                });\r\n\r\n        firebase.firestore().collection('registration').doc(hallId)\r\n        .delete()\r\n    }\r\n\r\n\r\n    async sendPushNotification(expoPushToken,roomName) {\r\n        const message = {\r\n            to: expoPushToken,\r\n            sound: 'default',\r\n            title: 'Farha App',\r\n            body: `نأسف, تم رفض طلب حجز ${roomName} لتأخرك في دفع العربون`,\r\n\r\n        };\r\n\r\n        await fetch('https://exp.host/--/api/v2/push/send', {\r\n            method: 'POST',\r\n            mode: 'no-cors',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Accept-encoding': 'gzip, deflate',\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(message),\r\n        }).then(response => console.log(response.text()))\r\n    }\r\n\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {flex:1, borderRadius: 15,backgroundColor:'#fff',\r\n        justifyContent:'center',alignItems:'center',marginHorizontal:10,marginVertical:10,\r\n        flexDirection:'column',borderColor:'#E4E4E4',borderWidth:1,height:\"100%\"\r\n    },\r\n    detailCont:{flex:1,justifyContent:'flex-start',alignItems:'flex-end',height:'100%'},\r\n    btnCont:{ width:'100%',flex: 1,\r\n    flexDirection: 'column',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',},\r\n    btn:{height:50,backgroundColor:'#49BD78',justifyContent:'center',alignItems:'center',width:'80%'\r\n    , marginTop: 10, borderRadius:15\r\n    \r\n    },\r\n\r\n    btn2:{height:50,backgroundColor:'#EC3C3D',justifyContent:'center',alignItems:'center',width:'80%',marginTop:10,marginBottom:10\r\n,borderRadius:15\r\n    },\r\n    orderTxtDetail:{width:'100%',textAlign:'right',marginVertical:5},\r\n    accept:{marginTop:15,color:'#49BD78',marginBottom:15,fontSize:20,fontWeight:'bold'}\r\n})"]},"metadata":{},"sourceType":"module"}